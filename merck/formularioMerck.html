<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link rel="stylesheet" href="./formMerck.css">
</head>
<body>
    
    <div class="container">

         <!-- formulario preguntas -->
         <div class="container_widzard " id="container_widzard">
                <div class="widzar_head">
                     <h2>EVALúA TU TIROIDES</h2>
                     <p>CUESTIONARIO</p>
                </div>

                <form id="myForm">
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/genero-1.jpg" alt="Imagen pregunta 1">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>género</h2>
                                </div>
                                <div class="gender-selector">
                                    <input type="radio" id="male" name="gender" value="male">
                                    <label for="male">Masculino</label>
                                    <input type="radio" id="female" name="gender" value="female">
                                    <label for="female">Femenino</label>
                                   
                                </div>
                            </div>
                        
                        </div>

                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/edad-1.jpg" alt="Imagene pregunta 2">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>Edad</h2>
                                </div>
                            
                                <div class="input-selector">
                                    <input type="number" value="" name="ages" placeholder="Escribe aquí">
                                </div>
                            </div>   
                        
                        </div>

                        <!-- Pregunta 3   -->
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-1.jpg" alt="Imagene pregunta 3">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>¿Sudas muy poco,
                                        incluso en los días de
                                        calor?</h2>
                                </div>
                            
                                <div class="circle-selector">
                                    <input type="radio" id="si" name="question3" value="1">
                                    <label for="si">SI</label>
                                    <input type="radio" id="no" name="question3" value="0">
                                    <label for="no">NO</label>
                                </div>
                            </div>   
                        
                        </div>

                        <!-- Pregunta 4   -->
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-2.jpg" alt="Imagene pregunta 4">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>Cuando hablas o cantas,
                                        ¿tienes que aclararte la
                                        garganta regularmente?</h2>
                                </div>
                            
                                <div class="circle-selector">
                                    <input type="radio" id="si4" name="question4" value="1">
                                    <label for="si4">SI</label>
                                    <input type="radio" id="no4" name="question4" value="0">
                                    <label for="no4">NO</label>
                                </div>
                            </div>   
                        </div>

                        <!-- Pregunta 5   -->
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-3.jpg" alt="Imagene pregunta 5">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>¿Tienes la sensación de
                                        cosquilleo, hormigueo o ardor
                                        sin causa aparente?</h2>
                                </div>
                            
                                <div class="circle-selector">
                                    <input type="radio" id="si5" name="question5" value="1">
                                    <label for="si5">SI</label>
                                    <input type="radio" id="no5" name="question5" value="0">
                                    <label for="no5">NO</label>
                                </div>
                            </div>   
                        </div>

                        <!-- Pregunta 6   -->
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-4.jpg" alt="Imagene pregunta 6">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>¿Sufres resequedad en
                                        la piel o tienes piel muy seca?</h2>
                                </div>
                            
                                <div class="circle-selector">
                                    <input type="radio" id="si6" name="question6" value="1">
                                    <label for="si6">SI</label>
                                    <input type="radio" id="no6" name="question6" value="0">
                                    <label for="no6">NO</label>
                                </div>
                            </div>   
                        </div>

                        <!-- Pregunta 7   -->
                        <div class="widzar_question">
                            <div class="gender-image">
                                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-5.jpg" alt="Imagene pregunta 7">
                            </div>
                            <div class="gender-body">
                                <div class="question_title">
                                    <h2>¿Sufres de estreñimiento
                                        o problemas digestivos?</h2>
                                </div>
                            
                                <div class="circle-selector">
                                    <input type="radio" id="si7" name="question7" value="1">
                                    <label for="si7">SI</label>
                                    <input type="radio" id="no7" name="question7" value="0">
                                    <label for="no7">NO</label>
                                </div>
                            </div>   
                        </div>

                        <!-- Pregunta 8   -->
                            <div class="widzar_question">
                                <div class="gender-image">
                                    <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-6.jpg" alt="Imagene pregunta 8">
                                </div>
                                <div class="gender-body">
                                    <div class="question_title">
                                        <h2>¿Has perdido la capacidad
                                            auditiva poco a poco?</h2>
                                    </div>
                                
                                    <div class="circle-selector">
                                        <input type="radio" id="si8" name="question8" value="1">
                                        <label for="si8">SI</label>
                                        <input type="radio" id="no8" name="question8" value="0">
                                        <label for="no8">NO</label>
                                    </div>
                                </div>   
                            </div>

                            <!-- Pregunta 9   -->
                            <div class="widzar_question">
                                <div class="gender-image">
                                    <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-7.jpg" alt="Imagene pregunta 9">
                                </div>
                                <div class="gender-body">
                                    <div class="question_title">
                                        <h2>¿Has ganado peso sin
                                            motivo aparente?</h2>
                                    </div>
                                
                                    <div class="circle-selector">
                                        <input type="radio" id="si9" name="question9" value="1">
                                        <label for="si9">SI</label>
                                        <input type="radio" id="no9" name="question9" value="0">
                                        <label for="no9">NO</label>
                                    </div>
                                </div>   
                            </div>

                                <!-- Pregunta 10   -->
                            <div class="widzar_question">
                                <div class="gender-image">
                                    <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/sudor-8.jpg" alt="Imagene pregunta 10">
                                </div>
                                <div class="gender-body">
                                    <div class="question_title">
                                        <h2>¿Sientes que la piel de
                                            tus manos, codos o antebrazos
                                            es más gruesa?</h2>
                                    </div>
                                
                                    <div class="circle-selector">
                                        <input type="radio" id="si10" name="question10" value="1">
                                        <label for="si10">SI</label>
                                        <input type="radio" id="no10" name="question10" value="0">
                                        <label for="no10">NO</label>
                                    </div>
                                </div>   
                            </div>



                    <div class="widzar_footer">
                        <button  class="botón" type="submit" id="submitButton">Ver Resultados</button>
                    </div>
                </form>

         </div>
            <!-- formulario preguntas -->

        <div class="container-result dbH" id="container-result">
            <div class="result-img">
                <img src="http://localhost/nuncaParesDeAprender/wordpress/wp6merk/wp-content/uploads/2023/04/Rectangle-613.png" alt="imagen resultado">
            </div>
            <div class="result-content">
                <p>Gracias por contarme tus síntomas. 
                    Tienes <span id="resultoTotal"></span> puntos y tus respuestas sugieren que probablemente tienes un problema de tiroides, pero por favor habla con tu médico para confirmarlo.Acude siempre a tu médico para realizar una prueba de tiroides rápida y sencilla.
            </p> 

            <h2>¿Estás dispuesto a ver un especialista? </h2>
                <div class="circle-selector">
                    <input type="radio" id="agreeSi" name="agree" value="1">
                    <label for="agreeSi">SI</label>
                    <input type="radio" id="agreeNo" name="agree" value="0">
                    <label for="agreeNo">NO</label>
                </div>
            </div>

        </div>
    </div>


    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/validate.js/0.13.1/validate.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.all.min.js"></script>
    

    <script>
          const constraints = {
                    gender: {
                        presence: { message: "El género es obligatorio" },
                    },
                    ages: {
                        presence: { message: "La edad es obligatoria" },
                        numericality: {
                        onlyInteger: true,
                        greaterThan: 0,
                        lessThanOrEqualTo: 120,
                        message: "La edad debe ser un número entero positivo menor o igual a 120"
                        }
                    },
                    question3: {
                        presence: { message: "La pregunta 3 es obligatoria" },
                    },
                    question4: {
                        presence: { message: "La pregunta 4 es obligatoria" },
                    },
                    question5: {
                        presence: { message: "La pregunta 5 es obligatoria" },
                    },
                    question6: {
                        presence: { message: "La pregunta 6 es obligatoria" },
                    },
                    question7: {
                        presence: { message: "La pregunta 7 es obligatoria" },
                    },
                    question8: {
                        presence: { message: "La pregunta 8 es obligatoria" },
                    },
                    question9: {
                        presence: { message: "La pregunta 9 es obligatoria" },
                    },
                    question10: {
                        presence: { message: "La pregunta 10 es obligatoria" },
                    },

                    
                };


            const form = document.querySelector("#myForm");

                form.addEventListener("submit", function (event) {
                event.preventDefault();

                const formData = new FormData(form);
                const values = Object.fromEntries(formData.entries());

                const errors = validate(values, constraints);

                if (errors) {
                    // const errorMessages = Object.values(errors).join("\n");
                    // alert("Por favor, corrija los siguientes errores:\n\n" + errorMessages);

                    Swal.fire(
                        'Revisar',
                        'Es necesario que complete todas las preguntas',
                        'error'
                        )

                    // alert("Debe selecionar todas las pregunras")
                } else {
                    // Enviar el formulario

                    // alert(Object.values(values))

                    const valor_question1 = document.getElementsByName("gender")[0].value;
                    const valor_question2 = document.getElementsByName("ages")[0].value;

                    let numberEdad = 0

                    if(valor_question1 == 'male') {
                        numberEdad+=2
                    } else {
                        numberEdad+=3
                    }

                    if (valor_question2 > 12 && valor_question2 < 18) {
                        numberEdad += 2
                     }
                     
                     if (valor_question2 > 18 && valor_question2 < 30) {
                        numberEdad += 3
                     }

                     if (valor_question2 > 31) {  
                        numberEdad += 4
                     }

                    const valor_question3 = document.getElementsByName("question3")[0].value;
                    numberEdad += parseInt(valor_question3)

                    const valor_question4 = document.getElementsByName("question4")[0].value;
                    numberEdad += parseInt(valor_question4)

                    const valor_question5 = document.getElementsByName("question5")[0].value;
                    numberEdad += parseInt(valor_question5)

                    const valor_question6 = document.getElementsByName("question6")[0].value;
                    numberEdad += parseInt(valor_question6)

                    const valor_question7 = document.getElementsByName("question7")[0].value;
                    numberEdad += parseInt(valor_question7)

                    const valor_question8 = document.getElementsByName("question8")[0].value;
                    numberEdad += parseInt(valor_question8)

                    const valor_question9 = document.getElementsByName("question9")[0].value;
                    numberEdad += parseInt(valor_question9)

                    const valor_question10 = document.getElementsByName("question10")[0].value;
                    numberEdad += parseInt(valor_question10)


                    // localStorage.setItem('total', numberEdad)
                    

                    const formHide = document.getElementById("container_widzard")
                    formHide.classList.add('dbH')

                    const formResul = document.getElementById("container-result")
                    formResul.classList.remove('dbH')
                    

                    const elementoResultado = document.getElementById("resultoTotal");
                        elementoResultado.textContent = numberEdad;

                }
           });


           const radios = document.querySelectorAll('input[name="agree"]');
            radios.forEach(radio => {
                radio.addEventListener('change', event => {
                // Obtener el valor seleccionado
                const selectedValue = parseInt(event.target.value);
                console.log(selectedValue)

                if(selectedValue === 1) {
                    console.log("confirmado")
                    window.location.href = `http://localhost/nuncaParesDeAprender/wordpress/wp6merk/busca-un-especialista/`;

                }else {
                    console.log("No confirmado")
           

                    const formResul = document.getElementById("container-result")
                    formResul.classList.add('dbH')

                    const formHide = document.getElementById("container_widzard")
                    formHide.classList.remove('dbH')
                }

                });
            });

    </script>

</body>
</html>
